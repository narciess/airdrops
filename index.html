<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Airdrop DApp</title>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.76.0"></script>
</head>
<body>
    <h1>Solana Airdrop DApp</h1>
    <button id="connectWallet">Connect Wallet</button>
    <button id="airdrop">Request Airdrop</button>

    <script>
        let walletAddress = null;
        const connectWalletBtn = document.getElementById('connectWallet');
        const airdropBtn = document.getElementById('airdrop');
        
        // Solana 네트워크 연결
        const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('devnet'));
        
        // 지갑 연결 함수
        async function connectWallet() {
            if (window.solana && window.solana.isPhantom) {
                try {
                    const response = await window.solana.connect();
                    walletAddress = response.publicKey.toString();
                    alert('Wallet connected: ' + walletAddress);
                } catch (err) {
                    console.error(err);
                    alert('Wallet connection failed');
                }
            } else {
                alert('Phantom Wallet not found. Please install it!');
            }
        }
        
        // 에어드랍 요청 함수
        async function requestAirdrop() {
            if (!walletAddress) {
                alert('Please connect your wallet first!');
                return;
            }
            try {
                const signature = await connection.requestAirdrop(
                    new solanaWeb3.PublicKey(walletAddress),
                    solanaWeb3.LAMPORTS_PER_SOL
                );
                await connection.confirmTransaction(signature);
                alert('Airdrop successful! Check your wallet.');
            } catch (err) {
                console.error(err);
                alert('Airdrop failed. Try again later.');
            }
        }
        
        // 이벤트 리스너 연결
        connectWalletBtn.addEventListener('click', connectWallet);
        airdropBtn.addEventListener('click', requestAirdrop);
    </script>
</body>
</html>
